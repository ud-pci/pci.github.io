<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Portal codes - pci</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Portal codes";
        var mkdocs_page_input_path = "portal_codes.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> pci
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Basics</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="..">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../theory/">Theory</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Using pCI</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../installation/">Installation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ud_instructions/">Working at UD</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../parallel_codes/">Running the parallel codes</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">pCI Technical Details</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../main/">pCI code package</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../all-order/">All-order/MBPT code package</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../radial_grid/">Changing the radial grid</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../isotope_shifts/">Isotope shifts</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../supplementary/">Supplementary programs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pci-py/">pCI-py scripts</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Portal codes</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#method">Method</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../changelog/">Changelog</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Examples</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../pci-py-example/">Sr with pCI-py</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../upscaling/">Upscaling basis sets</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basis_x/">Building a basis set for CI+X</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../qed/">Running QED</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basis_neutral/">Example 1 - constructing basis for Ac and Sr</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basis_complex/">Example 2 - constructing basis for Fe XVII and Ni XIX</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">About</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../publications/">Publications</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../about/">About the Team</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../contact/">Contact Us</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">pci</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">pCI Technical Details</li>
      <li class="breadcrumb-item active">Portal codes</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="portal-codes">Portal codes</h1>
<p>In this section, we describe supplementary python scripts used to generate csv-formatted databases of energy levels and matrix elements for the University of Delaware's <a href="https://www1.udel.edu/atom/" target="_blank">Portal for High-Precision Atomic Data and Computation</a>. The required input files can be obtained from <code>conf</code> for energies and <code>dtm</code> for matrix elements. This process has been heavily automated using the <a href="../pci-py/">pCI-py scripts</a>. </p>
<h2 id="method">Method</h2>
<p>The method of generating the csv-formatted atomic data files is summarized in the following steps:</p>
<ol>
<li>
<p><em>Reading and reformatting input files</em><br />
   First, we read all <code>CONFFINAL.RES</code> outputs from <code>conf</code> from each calculation done. The script will first check directories <code>/ci+all-order/even/</code>, <code>/ci+all-order/odd/</code>, <code>/ci+second-order/even/</code> and <code>/ci+second-order/odd/</code> for this file. If these directories are not detected, then it will check the <code>/DATA_RAW/</code> directory, where users should place them. If using this directory, the all-order output files should be named <code>CONFFINALeven.RES</code> and <code>CONFFINALodd.RES</code>, and the second-order output files should be named <code>CONFFINALevenMBPT.RES</code> and <code>CONFFINALoddMBPT.RES</code>. If the all-order and second-order directories are detected, the script will place them in <code>/DATA_RAW/</code> itself. Additionally, matrix element output files, such as <code>E1.RES</code> from <code>dtm</code> can be read. The script will check directories <code>/ci+all-order/dtm/</code> and <code>/ci+second-order/dtm/</code> first before <code>/DATA_RAW/</code>. The all-order and second-order output files should be named, for example, <code>E1.RES</code> and <code>E1MBPT.RES</code>.<br />
   Once all input files are read, if second-order/MBPT exist, then uncertainties are calculated and a new csv-formatted <code>CONFFINAL.csv</code> is written with uncertainties. Otherwise, they are all set to 0 in this file.<br />
   Experimental data are then acquired by parsing the <a href="https://physics.nist.gov/PhysRefData/ASD/levels_form.html" target="_blank">NIST Atomic Spectral Database</a> for full list of energy levels and stored for comparison with the data we generated through pCI. </p>
</li>
<li>
<p><em>Filtering and correcting misidentified configurations</em><br />
   Sometimes the configurations and terms of energy levels outputted from the pCI codes might be be misidentified due to discrepancies in basis or numerical precision. At this stage, we attempt to correct misidentified configurations using the data from NIST. Here we create a correspondence that maps the parsed NIST identifications to the pCI theory data. This correspondence or mapping is written to the files <code>/DATA_Output/Element_Even.txt</code> and  <code>/DATA_Output/Element_Odd.txt</code>. </p>
</li>
<li>
<p><em>Outputting data for portal</em><br />
   The final part of the portal codes reformats the mapping of NIST and pCI energy levels for use on the UD Atom portal. The output is a csv-formatted file of the energies of the system, with a preference for NIST data over pCI-calculated data, i.e. for each configuration, NIST energies and identifications are chosen over the theory data. If NIST data is not available, then the theory values are used. The final column of the csv file <code>is_from_theory</code> is set to <code>True</code> if theory values are used. The energy levels are stored in <code>Element_Energies.csv</code> and the matrix elements are stored in <code>Element_Matrix_Elements_Theory.csv</code>. Additionally, the script <code>calc_lifetimes.py</code> can be used to generate csv-formatted files of transition rates and lifetimes. These are outputted as <code>Element_Lifetimes_Error_Check.csv</code> and <code>Element_Transition_Rates_Error_Check.csv</code>.</p>
</li>
</ol>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../pci-py/" class="btn btn-neutral float-left" title="pCI-py scripts"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../changelog/" class="btn btn-neutral float-right" title="Changelog">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>&copy; Copyright 2024, pCI Development Team.</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../pci-py/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../changelog/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
