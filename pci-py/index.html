<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>pCI-py scripts - pci</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "pCI-py scripts";
        var mkdocs_page_input_path = "pci-py.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> pci
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Basics</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="..">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../theory/">Theory</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Using pCI</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../installation/">Installation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ud_instructions/">Working at UD</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../parallel_codes/">Running the parallel codes</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">pCI Technical Details</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../main/">pCI code package</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../all-order/">All-order/MBPT code package</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../supplementary/">Supplementary programs</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">pCI-py scripts</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#configyml">config.yml</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#basispy">basis.py</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#addpy">add.py</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#dtmpy">dtm.py</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#gen_portal_csvpy">gen_portal_csv.py</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../portal_codes/">Portal codes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../changelog/">Changelog</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Examples</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../pci-py-example/">Sr with pCI-py</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basis_x/">Building a basis set for CI+X</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../qed/">Running QED</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basis_neutral/">Example 1 - constructing basis for Ac and Sr</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basis_complex/">Example 2 - constructing basis for Fe XVII and Ni XIX</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">About</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../publications/">Publications</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../about/">About the Team</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../contact/">Contact Us</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">pci</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">pCI Technical Details</li>
      <li class="breadcrumb-item active">pCI-py scripts</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="pci-py-scripts">pci-py scripts</h1>
<p>In this section, we describe supplementary python scripts used to automate the entire pCI process, from the generation of basis sets and configuration lists to the actual calculations themselves. These python scripts read a user-defined YAML-formatted configuration file <code>config.yml</code> to set general parameters defining the atomic system of interest, as well as parameters defining the types of the calculations.</p>
<p><em>These python scripts are currently designed primarily for massive data generation via CI+all-order and CI+MBPT calculations on the UD clusters. They can be modified in the future for more general calculations.</em></p>
<h2 id="configyml">config.yml</h2>
<p>The <code>config.yml</code> file is a YAML-formatted configuration file that defines important parameters of the atomic system of interest. This config file is divided into several sections:</p>
<ul>
<li>general parameters</li>
<li>parameters used by basis programs (only read by basis.py)</li>
<li>parameters used by add program (only read by add.py)</li>
<li>parameters used by conf program (only read by add.py)</li>
<li>parameters used by dtm program (only read by dtm.py)</li>
<li>optional parameters</li>
</ul>
<p>The general parameters are in the block <code>system</code> and is read by all python scripts:</p>
<pre><code class="language-text">system:
    name: Sr
    isotope: 
    include_breit: True
</code></pre>
<p>The <code>system.name</code> field takes the name of the atomic system of interest.<br />
The <code>system.isotope</code> field takes a specified isotope number. If left blank, the script will automatically find the atomic weight from nuclear radii table.<br />
The <code>system.include_breit</code> field takes in a boolean to set whether to include Breit corrections or not.</p>
<h2 id="basispy">basis.py</h2>
<p>The <code>basis.py</code> script automatically generates the basis set given information about the atomic system of interest via a configuration file <code>config.yml</code>. This script reads the <code>basis</code> block:</p>
<pre><code class="language-text">basis:
    cavity_radius: 60
    orbitals:
        core: 1s 2s 2p 3s 3p 3d 4s 4p 
        valence: 5s 5p 4d 6s 6p 5d 4f
        nmax: 35
        lmax: 6
    b_splines:
        nmax: 40
        lmax: 6
        k: 7
    val_aov:
        s: 4
        p: 4
        d: 4
        f: 3
    val_energies:
        kval: 1
        energies: 
            s: -0.28000
            p: [-0.22000, -0.22000]
            d: [-0.31000, -0.31000]
            f: [-0.13000, -0.13000]
</code></pre>
<p>The <code>basis.cavity_radius</code> field takes in a value to set the size of the spherical cavity.<br />
The <code>basis.orbitals</code> block requires specification of the core and valence orbitals to be included in the basis. It also requires a maximum principal quantum number <code>nmax</code> and maximum partial wave <code>lmax</code> for basis set orbital generation.
The <code>basis.b_splines</code> block requires specification of the maximum principal quantum number <code>nmax</code> (number of splines), maximum partial wave  <code>lmax</code>, and order of splines.<br />
The <code>basis.val_aov</code> block requires the number of valence orbitals to include for each partial wave.<br />
The <code>basis.val_energies</code> block allows specification of the energies of the valence orbitals. </p>
<p>In addition, the script will read the <code>optional</code> block:</p>
<pre><code class="language-text">optional:
    qed:
        include: False
        rotate_basis: False

    isotope_shifts: 
        include: False
        K_is: 1
        C_is: 0.01

    code_exec: ci+all-order
    run_ao_codes: False
</code></pre>
<p>The <code>optional.qed</code> block allows users to specify inclusion of QED corrections (this is currently not supported).<br />
The <code>optional.isotope_shifts</code> block allows users to specify isotope shift calculations by switching the <code>include</code> value to <code>True</code> and specifying keys <code>K_is</code> and <code>C_is</code>.<br />
The <code>optional.code_exec</code> field allows users to specify automatic execution of basis set codes depending on value.<br />
The <code>optional.run_ao_codes</code> field allows users to specify whether they would like to run the all-order set of codes after construction of the basis set.</p>
<h2 id="addpy">add.py</h2>
<p>The <code>add.py</code> script automatically generates the list of configurations given information about the atomic system of interest via a configuration file <code>config.yml</code>. Note that if <code>BASS.INP</code> is not present, the order of the conigurations will be by $nl$, and not how it is defined in the basis set construction. This script reads the <code>add</code> block:</p>
<pre><code class="language-text">add:
    # Lists of even and odd parity reference configurations
    ref_configs:
        odd: [5s1   5p1]
        even: [5s2]
    basis_set: 22spdfg
    orbitals:
        core: 1s 2s 2p 3s 3p 3d 4s 4p 
        active: [
            4-7p:  0  4,
            4-7d:  0  4,
            4-7f:  0  4,
            5-7g:  0  4,
            ]    
    excitations:
        single: True
        double: True
        triple: False
</code></pre>
<p>The <code>add.ref_configs</code> block requires a list of reference configurations to excite electrons from to construct the list of configurations for the CI calculation. This list will not be constructed if left blank for a specified parity.<br />
The <code>add.basis_set</code> block requires specification of the basis set designated by <code>nspdfg</code>, where <code>n</code> specifies the principal quantum number, and <code>spdfg</code> specifies inclusion of s, p, d, f, and g orbitals. One can include higher partial waves by appending to the end of the list <code>h</code>, <code>i</code>, <code>k</code>, ...<br />
The <code>add.orbitals</code> block allows full customization of allowed orbital occupancies. For example, <code>1-2s: 2 2</code> defines the 1s and 2s orbitals to be closed, <code>2p: 6 6</code> defines the 2p orbital to be closed, <code>3-7p: 0 6</code> defines 3p to 7p orbitals to be completely open to allow up to 6 electrons on those orbitals.<br />
The <code>add.excitations</code> block defines the number of allowed excitations.</p>
<p>This script also reads parameters for the CI execution from the <code>conf</code> block:</p>
<pre><code class="language-text">conf:
    J: 0.0
    JM: 0.0
    J_selection: False
    num_energy_levels: 24
    num_dvdsn_iterations: 100
    include_lsj: True
    write_hij: False
</code></pre>
<p>The <code>conf.J</code> field defines the total angular momentum of the energy levels.<br />
The <code>conf.JM</code> field defines the projection of the total angular momentum.<br />
The <code>conf.J_selection</code> field defines whether the user wants energy levels of a specific J value defined by J and JM.<br />
The <code>conf.num_energy_levels</code> field defines the number of energy levels to be calculated.<br />
The <code>conf.num_dvdsn_iterations</code> field defines the total number of Davidson iterations allowed.<br />
The <code>conf.include_lsj</code> field defines whether the user wants expectation values <script type="math/tex">L^2</script> and <script type="math/tex">S^2</script> to be calculated.<br />
The <code>conf.write_hij</code> field defines whether the user wants the Hamiltonian matrix to be written to file <code>CONF.HIJ</code>.  </p>
<h2 id="dtmpy">dtm.py</h2>
<p>The <code>dtm.py</code> script automatically generates the density and/or transition matrix elements given information about the atomic system of interest via a configuration file <code>config.yml</code>. This script reads the <code>dtm</code> block:</p>
<pre><code class="language-text">dtm:
    matrix_elements: E1
    include_rpa: True
</code></pre>
<p>The <code>dtm.matrix_elements</code> field defines the types of matrix elements to be calculated. This can be a single matrix element or an array of matrix elements such as <code>[E1, M2]</code>
The <code>dtm.include_rpa</code> field defines whether the user would like to include RPA corrections.</p>
<h2 id="gen_portal_csvpy">gen_portal_csv.py</h2>
<p>The <code>gen_portaL_csv.py</code> script generates csv-formatted datafiles of atomic properties given information about the atomic system of interest via a configuration file <code>config.yml</code>. This script reads the <code>portal</code> block:</p>
<pre><code class="language-text">portal:
    ignore_g: True
</code></pre>
<p>The <code>portal.ignore_g</code> field removes all atomic properties with <script type="math/tex">>g</script> orbitals in the configuration or <script type="math/tex">>G</script> terms.</p>
<p>The <code>parse_asd.py</code> script parses the NIST Atomic Spectra Database and generates a csv-formatted file with spectral data for a user-inputed system of interest. The csv outputted by the script is formatted for the <a href="https://www1.udel.edu/atom/" target="_blank">UD Portal for High-Precision Atomic Data and Computation</a>. </p>
<p><em>More information about atomic data generation for the UD ATOM portal can be found <a href="../portal_codes/" target="_blank">here</a></em>.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../supplementary/" class="btn btn-neutral float-left" title="Supplementary programs"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../portal_codes/" class="btn btn-neutral float-right" title="Portal codes">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>&copy; Copyright 2024, pCI Development Team.</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../supplementary/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../portal_codes/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
